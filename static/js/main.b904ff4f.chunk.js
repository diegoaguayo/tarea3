(this.webpackJsonptareareact=this.webpackJsonptareareact||[]).push([[0],{52:function(e,t,n){},84:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(16),s=n.n(r),j=(n(52),n(2)),a=n(46),o=n(47),b=n.n(o)()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights"}),u=n(4),O=n(5),d=n(90),l=n(94),h=n(95),x=n(91),f=n(92),m=n(93),p=n(6),g=n.n(p),v=(n(84),n(1));function S(e){var t=e.flights.map((function(e){return Object(v.jsx)(C,{flight:e},e.code)})),n=Object(c.useState)({}),i=Object(j.a)(n,2),r=i[0],s=i[1],a=Object(c.useState)([]),o=Object(j.a)(a,2),h=o[0],x=o[1];Object(c.useEffect)((function(){b.on("POSITION",(function(e){!function(e){x((function(t){return[].concat(Object(O.a)(t),[e])}));if(r[e.code])var t=r[e.code].position,n=e.position,c=180*Math.atan2(t[0]-n[0],t[1]-n[1])/Math.PI;r[e.code]=Object(u.a)(Object(u.a)({},e),{},{angle:c}),s(Object(u.a)({},r))}(e)}))}),[]);var f=h.map((function(e){return Object(v.jsx)(E,{flight:e})})),m=Object.keys(r).map((function(e){return Object(v.jsx)(I,{airplane:r[e]})}));return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:'MAPA "En vivo"'}),Object(v.jsx)("h4",{children:"Hacer click sobre un avi\xf3n para obtener su c\xf3digo"}),Object(v.jsxs)(d.a,{center:[-35,-65],zoom:4,scrollWheelZoom:!1,children:[Object(v.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),m,t,f]})]})}function C(e){var t=e.flight,n=[t.origin,t.destination];return Object(v.jsxs)("div",{children:[Object(v.jsx)(h.a,{center:t.origin,radius:200}),Object(v.jsx)(x.a,{positions:n}),Object(v.jsx)(h.a,{center:t.destination,radius:1e3})]})}function E(e){var t=e.flight;return Object(v.jsx)(h.a,{center:t.position,color:"grey",radius:200})}function I(e){var t=e.airplane,n=g.a.icon({iconUrl:"https://upload.wikimedia.org/wikipedia/commons/c/c2/20_airtransportation.svg",iconSize:[35,35],iconAnchor:[17.5,17.5]});return Object(v.jsx)(f.a,{position:t.position,icon:n,children:Object(v.jsxs)(m.a,{children:["Code: ",t.code]})})}n(86);function L(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)({}),s=Object(j.a)(r,2);s[0],s[1];Object(c.useEffect)((function(){b.emit("FLIGHTS"),b.on("FLIGHTS",(function(e){i(e)}))}),[]);var a=n.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(T,{flight:e})})}));return Object(v.jsxs)("div",{children:[Object(v.jsx)(S,{flights:n}),Object(v.jsx)("button",{onClick:function(){b.emit("FLIGHTS")},children:"Refresh Flights"}),Object(v.jsx)("h2",{children:" INFORMACI\xd3N DE LOS VUELOS "}),Object(v.jsx)("ul",{id:"sideList",children:a})]})}var T=function(e){var t=e.flight;return Object(v.jsx)(a.a,{trigger:Object(v.jsxs)("button",{children:[" ",t.code]}),position:"right center",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"INFORMACI\xd3N DEL VUELO"}),Object(v.jsxs)("p",{children:["Code: ",t.code]}),Object(v.jsxs)("p",{children:["Airline: ",t.airline]}),Object(v.jsxs)("p",{children:["Origin: ",t.origin]}),Object(v.jsxs)("p",{children:["Destination: ",t.destination]}),Object(v.jsxs)("p",{children:["Number of seats: ",t.seats]})]})})},y=n(29);function A(){var e=Object(c.useState)("guest"),t=Object(j.a)(e,2),n=t[0],i=t[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:" CENTRO DE CONTROL "}),Object(v.jsx)(F,{username:n,setUsername:i}),Object(v.jsx)(M,{}),Object(v.jsx)(k,{username:n})]})}function F(e){var t=Object(y.a)(),n=t.register,c=t.handleSubmit,i=t.reset;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{children:["Nombre de usuario: ",Object(v.jsx)("strong",{children:e.username})]}),Object(v.jsxs)("form",{onSubmit:c((function(t){e.setUsername(t.username),i({})})),children:[Object(v.jsxs)("label",{children:["Cambiar nombre de usuario:",Object(v.jsx)("br",{}),Object(v.jsx)("input",Object(u.a)({type:"text",placeholder:"",name:"username"},n("username")))]}),Object(v.jsx)("input",{type:"submit",value:"Actualizar"})]})]})}function M(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1];var r=n.map((function(e){return Object(v.jsx)(N,{msg:e})}));return Object(c.useEffect)((function(){b.on("CHAT",(function(e){return function(e){i((function(t){return[].concat(Object(O.a)(t),[e])}))}(e)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"LOG MENSAJES:"}),r]})}function N(e){var t=e.msg;return Object(v.jsxs)("section",{style:{padding:"10px",border:"1px solid black"},children:[Object(v.jsxs)("strong",{children:["username: ",t.name," ",Object(v.jsx)("br",{})]}),"Date: ",new Date(t.date).toUTCString()," ",Object(v.jsx)("br",{}),Object(v.jsxs)("strong",{children:["Message: ",t.message]})]})}function k(e){var t=Object(y.a)(),n=t.register,c=t.handleSubmit,i=t.reset;return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:c((function(t){var n={name:e.username,message:t.message};b.emit("CHAT",n),i({})})),children:[Object(v.jsxs)("label",{children:["Mensaje: ",Object(v.jsx)("br",{}),Object(v.jsx)("textarea",Object(u.a)({type:"text",placeholder:"",name:"message"},n("message")))]}),Object(v.jsx)("input",{type:"submit",value:"Enviar"})]})})}var w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsxs)("div",{id:"container",children:[Object(v.jsx)("div",{children:Object(v.jsx)(L,{})}),Object(v.jsx)("div",{children:Object(v.jsx)(A,{})})]})}),document.getElementById("root")),w()}},[[88,1,2]]]);
//# sourceMappingURL=main.b904ff4f.chunk.js.map