{"version":3,"sources":["services/socket.js","Map.js","Flights.js","reportWebVitals.js","index.js"],"names":["socket","socketIOClient","path","Map","displacementsList","flights","map","flight","Displacement","code","useState","airplanePositions","setAirplanePositions","positionPoints","setPositionPoints","useEffect","on","data","oldArray","last_pos","position","new_pos","angleDeg","Math","atan2","PI","angle","logPositions","loggedPositions","PaintPosition","logAirplanePositions","Object","keys","key","DisplayAirplane","airplane","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","displacement","origin","destination","Circle","radius","Polyline","positions","color","myIcon","L","icon","iconUrl","iconSize","iconAnchor","size","Marker","Popup","Flights","setFlights","emit","flightList","ShowFlight","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0bb1644b.chunk.js","sourcesContent":["import socketIOClient from \"socket.io-client\";\n\nexport const socket = socketIOClient(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/\", {\n        path: \"/flights\"\n      });","import React, { useEffect, useState, Component } from 'react';\nimport {socket} from \"./services/socket\";\nimport leaflet, { MapContainer, TileLayer, Marker, Popup, Polyline, Circle} from 'react-leaflet'\nimport L from \"leaflet\";\n\n//component chat recibe userrname\nimport './Map.css';\n\nexport default function Map({flights}) {\n\n  const displacementsList = flights.map((flight) =>\n        <Displacement key={flight.code} flight={flight}/>\n  );\n\n  const [airplanePositions, setAirplanePositions] = useState({});\n\n  const [positionPoints, setPositionPoints] = useState([]);\n\n  useEffect(() => {\n    socket.on(\"POSITION\", data => {\n      logPositions(data);\n    });\n\n  }, []);\n\n  function logPositions(data) {\n    setPositionPoints( oldArray => [...oldArray, data])\n    var angle = 0;\n    if (airplanePositions[data.code]) {\n      const last_pos = airplanePositions[data.code].position\n      const new_pos = data.position\n      var angleDeg = Math.atan2(last_pos[0] - new_pos[0], last_pos[1] - new_pos[1]) * 180 / Math.PI;\n    }\n    airplanePositions[data.code] = {...data, angle: angleDeg};\n    setAirplanePositions({...airplanePositions});\n  }\n\n  const loggedPositions = positionPoints.map((flight) =>\n        <PaintPosition flight={flight}/>\n  );\n\n  const logAirplanePositions = Object.keys(airplanePositions).map((key) =>\n    <DisplayAirplane airplane={airplanePositions[key]}/>\n  );\n  \n    \n  \n\n  return (\n    <div>\n      <p>MAPA \"En vivo\"</p>\n        <MapContainer center={[51.505, -0.09]} zoom={2} scrollWheelZoom={false}>\n          <TileLayer\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          {logAirplanePositions}\n          {displacementsList}\n          {loggedPositions}\n        </MapContainer>\n    </div>\n      \n  );\n}\n\n\nfunction Displacement({flight}) {\n    const displacement = [flight.origin, flight.destination];\n    return (\n      <div>\n        <Circle center={flight.origin} radius={200} />\n        <Polyline positions={displacement} />\n        <Circle center={flight.destination} radius={1000} />\n      </div>\n    )\n  }\n\nfunction PaintPosition({flight}) {\n  return (\n    <Circle center={flight.position} color=\"grey\" radius={200} />\n  )\n}\n\nfunction DisplayAirplane({airplane}) {\n\n  const size = 35\n\n  const myIcon = L.icon({\n    iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/c/c2/20_airtransportation.svg',\n    iconSize  : [size, size],\n    iconAnchor: [size/2, size/2],\n  });\n\n  return (\n    <Marker position={airplane.position} icon={myIcon}>\n            <Popup>\n              Airplane: {airplane.code}\n            </Popup>\n    </Marker>\n  )\n}\n","import React, { useEffect, useState, Component } from 'react';\nimport {socket} from \"./services/socket\";\nimport Map from './Map';\n\n\n\n\nexport default function Flights() {\n  const [flights, setFlights] = useState([]);\n  const [flightsByCode, setFlightsByCode] = useState({});\n\n  useEffect(() => {\n    socket.emit(\"FLIGHTS\")\n    socket.on(\"FLIGHTS\", data => {\n      setFlights(data);\n    });\n\n  }, []);\n\n  function getFlights() {\n    socket.emit(\"FLIGHTS\")\n  }\n\n  const flightList = flights.map((flight) =>\n        <li>\n            <ShowFlight flight={flight}/>\n        </li>\n    );\n\n  return (\n    <div>\n      <Map flights={flights}/>\n      <p> INFORMACION DE LOS VUELOS </p>\n      <button onClick={() => getFlights()}>\n        Refresh Flights\n      </button>\n      <ul>\n        {flightList}\n      </ul>\n    </div>\n  );\n}\n\nfunction ShowFlight({flight}) {\n  return flight.code\n}\n\n\n\n\n//component chat recibe userrname\n//component mapa\n//component flights info\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Flights from './Flights';\nimport Chat from './Chat';\nimport Map from './Map';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Flights />\n    <br/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}