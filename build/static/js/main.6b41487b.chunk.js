(this.webpackJsonptareareact=this.webpackJsonptareareact||[]).push([[0],{52:function(e,t,n){},84:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(16),i=n.n(r),a=(n(52),n(2)),j=n(29),o=n(47),b=n.n(o)()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights"}),u=n(4),O=n(5),d=n(90),l=n(94),h=n(95),x=n(91),g=n(92),p=n(93),f=n(6),m=n.n(f),v=(n(84),n(1));function S(e){var t=e.flights.map((function(e){return Object(v.jsx)(E,{flight:e},e.code)})),n=Object(c.useState)({}),s=Object(a.a)(n,2),r=s[0],i=s[1],j=Object(c.useState)([]),o=Object(a.a)(j,2),h=o[0],x=o[1];Object(c.useEffect)((function(){b.on("POSITION",(function(e){!function(e){x((function(t){return[].concat(Object(O.a)(t),[e])}));if(r[e.code])var t=r[e.code].position,n=e.position,c=180*Math.atan2(t[0]-n[0],t[1]-n[1])/Math.PI;r[e.code]=Object(u.a)(Object(u.a)({},e),{},{angle:c}),i(Object(u.a)({},r))}(e)}))}),[]);var g=h.map((function(e){return Object(v.jsx)(C,{flight:e})})),p=Object.keys(r).map((function(e){return Object(v.jsx)(L,{airplane:r[e]})}));return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:'MAPA "En vivo"'}),Object(v.jsx)("h4",{children:"Hacer click sobre un avi\xf3n para obtener su c\xf3digo"}),Object(v.jsxs)(d.a,{center:[-35,-65],zoom:4,scrollWheelZoom:!1,children:[Object(v.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),p,t,g]})]})}function E(e){var t=e.flight,n=[t.origin,t.destination];return Object(v.jsxs)("div",{children:[Object(v.jsx)(h.a,{center:t.origin,radius:200}),Object(v.jsx)(x.a,{positions:n}),Object(v.jsx)(h.a,{center:t.destination,radius:1e3})]})}function C(e){var t=e.flight;return Object(v.jsx)(h.a,{center:t.position,color:"grey",radius:200})}function L(e){var t=e.airplane,n=m.a.icon({iconUrl:"https://upload.wikimedia.org/wikipedia/commons/c/c2/20_airtransportation.svg",iconSize:[35,35],iconAnchor:[17.5,17.5]});return Object(v.jsx)(g.a,{position:t.position,icon:n,children:Object(v.jsxs)(p.a,{children:["Code: ",t.code]})})}n(86);function I(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)({}),i=Object(a.a)(r,2);i[0],i[1];Object(c.useEffect)((function(){b.emit("FLIGHTS"),b.on("FLIGHTS",(function(e){s(e)}))}),[]);var j=n.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(N,{flight:e,passengerList:(t=e.passengers,t.map((function(e){return Object(v.jsx)(y,{passenger:e})})))})});var t}));return Object(v.jsxs)("div",{children:[Object(v.jsx)(S,{flights:n}),Object(v.jsx)("button",{onClick:function(){b.emit("FLIGHTS")},children:"Refresh Flights"}),Object(v.jsx)("h2",{children:" INFORMACI\xd3N DE LOS VUELOS "}),Object(v.jsx)("ul",{id:"sideList",children:j})]})}var N=function(e){var t=e.flight,n=e.passengerList;return Object(v.jsx)(j.a,{trigger:Object(v.jsxs)("button",{children:[" ",t.code]}),position:"right center",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"INFORMACI\xd3N DEL VUELO"}),Object(v.jsxs)("p",{children:["Code: ",t.code]}),Object(v.jsxs)("p",{children:["Airline: ",t.airline]}),Object(v.jsxs)("p",{children:["Origin: ",t.origin]}),Object(v.jsxs)("p",{children:["Destination: ",t.destination]}),Object(v.jsxs)("p",{children:["Number of seats: ",t.seats]}),Object(v.jsx)(T,{passengers:n})]})})},T=function(e){var t=e.passengers;return Object(v.jsx)(j.a,{trigger:Object(v.jsx)("button",{children:" Passengers"}),position:"right center",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Pasajeros"}),t]})})},y=function(e){var t=e.passenger;return Object(v.jsxs)("p",{children:["Nombre: ",t.name,", Edad: ",t.age]})},A=n(30);function F(){var e=Object(c.useState)("guest"),t=Object(a.a)(e,2),n=t[0],s=t[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:" CENTRO DE CONTROL "}),Object(v.jsx)(M,{username:n,setUsername:s}),Object(v.jsx)(k,{}),Object(v.jsx)(D,{username:n})]})}function M(e){var t=Object(A.a)(),n=t.register,c=t.handleSubmit,s=t.reset;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{children:["Nombre de usuario: ",Object(v.jsx)("strong",{children:e.username})]}),Object(v.jsxs)("form",{onSubmit:c((function(t){e.setUsername(t.username),s({})})),children:[Object(v.jsxs)("label",{children:["Cambiar nombre de usuario:",Object(v.jsx)("br",{}),Object(v.jsx)("input",Object(u.a)({type:"text",placeholder:"",name:"username"},n("username")))]}),Object(v.jsx)("input",{type:"submit",value:"Actualizar"})]})]})}function k(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1];var r=n.map((function(e){return Object(v.jsx)(w,{msg:e})}));return Object(c.useEffect)((function(){b.on("CHAT",(function(e){return function(e){s((function(t){return[].concat(Object(O.a)(t),[e])}))}(e)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"LOG MENSAJES:"}),r]})}function w(e){var t=e.msg;return Object(v.jsxs)("section",{style:{padding:"10px",border:"1px solid black"},children:[Object(v.jsxs)("strong",{children:["username: ",t.name," ",Object(v.jsx)("br",{})]}),"Date: ",new Date(t.date).toUTCString()," ",Object(v.jsx)("br",{}),Object(v.jsxs)("strong",{children:["Message: ",t.message]})]})}function D(e){var t=Object(A.a)(),n=t.register,c=t.handleSubmit,s=t.reset;return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:c((function(t){var n={name:e.username,message:t.message};b.emit("CHAT",n),s({})})),children:[Object(v.jsxs)("label",{children:["Mensaje: ",Object(v.jsx)("br",{}),Object(v.jsx)("textarea",Object(u.a)({type:"text",placeholder:"",name:"message"},n("message")))]}),Object(v.jsx)("input",{type:"submit",value:"Enviar"})]})})}var P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsxs)("div",{id:"container",children:[Object(v.jsx)("div",{children:Object(v.jsx)(I,{})}),Object(v.jsx)("div",{children:Object(v.jsx)(F,{})})]})}),document.getElementById("root")),P()}},[[88,1,2]]]);
//# sourceMappingURL=main.6b41487b.chunk.js.map